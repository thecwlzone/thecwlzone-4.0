<!DOCTYPE html><html lang="en" class="scheme-aurora"> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><link rel="canonical" href="https://www.thecwlzone.com/posts/2016/12/20/a-rails-pipeline-alternative/"><meta name="generator" content="Astro v5.13.2"><title>A Rails Antipipeline Alternative? | The CWL Zone</title><meta name="title" content="A Rails Antipipeline Alternative? | The CWL Zone"><meta name="description" content="Asset Pipeline Blues"><meta name="author" content="Lehman"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="A Rails Antipipeline Alternative?" href="https://www.thecwlzone.com/feed.xml"><meta property="og:title" content="A Rails Antipipeline Alternative? | The CWL Zone"><meta property="og:description" content="Asset Pipeline Blues"><meta property="og:url" content="https://www.thecwlzone.com/posts/2016/12/20/a-rails-pipeline-alternative/"><meta property="og:image" content="https://www.thecwlzone.com/posts/2016/12/20/a-rails-pipeline-alternative.png"><link rel="preload" as="font" type="font/woff2" href="/_astro/ibm-plex-sans-latin-400-normal.CDDApCn2.woff2" crossorigin="anonymous"><link rel="preload" as="font" type="font/woff2" href="/_astro/ibm-plex-sans-latin-500-normal.6ng42L7E.woff2" crossorigin="anonymous"><link rel="preload" as="font" type="font/woff2" href="/_astro/ibm-plex-sans-latin-600-normal.CuJfVYMP.woff2" crossorigin="anonymous"><link rel="preload" as="font" type="font/woff2" href="/_astro/ibm-plex-sans-latin-700-normal.Bxkt5Cjx.woff2" crossorigin="anonymous"><meta property="article:published_time" content="2016-12-20T00:00:00.000Z"><script data-default-mode="dark">
  window.mode ??= (() => {
    const defaultMode = document.currentScript.getAttribute('data-default-mode')
    const storageKey = 'mode'
    const store =
      typeof localStorage !== 'undefined'
        ? localStorage
        : { getItem: () => null, setItem: () => {} }

    const mediaMatcher = window.matchMedia('(prefers-color-scheme: light)')

    mediaMatcher.addEventListener('change', () => {
      applyMode(mode.getMode())
    })

    function applyMode(mode) {
      document.documentElement.dataset.mode = mode
      document.documentElement.style.colorScheme = mode
    }

    function setMode(mode = defaultMode) {
      store.setItem(storageKey, mode)
      applyMode(mode)
    }

    function getMode() {
      return store.getItem(storageKey) || defaultMode
    }

    return { setMode, getMode }
  })()

  mode.setMode(mode.getMode())
</script> <script type="module">document.addEventListener("astro:after-swap",()=>window.mode.setMode(window.mode.getMode()));</script><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.DZnDNxNb.js"></script><style>.medium-zoom-overlay{position:fixed;inset:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}
.prose code:not(.astro-code code):not(.astro-code-header code){background-color:color-mix(in oklab,rgb(var(--accent)) 15%,transparent);border-radius:var(--radius-sm);padding-inline:calc(var(--spacing) * 1);padding-top:calc(var(--spacing) * .5)}
</style>
<link rel="stylesheet" href="/_astro/index.DFfjbn1L.css"></head> <body>  <div class="mx-auto flex min-h-[100svh] w-full max-w-[90%] flex-col justify-between md:max-w-3xl"> <header> <a href="#main" class="absolute -top-full left-8 px-2 py-2 focus:top-8">Skip to main content</a> <div class="flex justify-between py-4 sm:py-8"> <a href="/" class="text-accent flex gap-2 text-2xl font-semibold"> <img src="/_astro/logo.CMeXV7G3_68cTD.svg" alt="The CWL Zone logo, a drawing of a square, a circle and the intials CWL" loading="eager" decoding="async" fetchpriority="auto" width="24" height="24"> The CWL Zone </a> <nav class="hidden flex-col justify-end sm:flex"> <ul class="flex gap-6"> <li class="flex flex-col justify-center"> <a href="/posts/" class="flex items-center gap-1 whitespace-nowrap text-accent/100" target="_self">  <span class="underline"> Blog </span> </a> </li><li class="flex flex-col justify-center"> <a href="/gallery/" class="flex items-center gap-1 whitespace-nowrap clickable" target="_self">  <span class> Photo Gallery </span> </a> </li><li class="flex flex-col justify-center"> <a href="/tags/" class="flex items-center gap-1 whitespace-nowrap clickable" target="_self">  <span class> Tags </span> </a> </li><li class="flex flex-col justify-center"> <a href="/about/" class="flex items-center gap-1 whitespace-nowrap clickable" target="_self">  <span class> About </span> </a> </li><li class="flex flex-col justify-center"> <a href="/contact/" class="flex items-center gap-1 whitespace-nowrap clickable" target="_self">  <span class> Contact </span> </a> </li> <li class="text-2xl"> <a href="/search/" class="flex items-center" aria-label="Search"> <span class="clickable iconify tabler--search"></span> </a> </li> <li class="text-2xl"> <dark-light-toggle> <button title="Toggle dark & light mode" class="flex items-center"> <span aria-hidden="true" class="clickable iconify tabler--moon dark:tabler--sun"></span> </button> </dark-light-toggle> <script type="module">class l extends HTMLElement{connectedCallback(){const e=this.querySelector("button");if(!e)return;e.setAttribute("aria-label",window.mode.getMode());const o=()=>{const t=window.mode.getMode()==="light"?"dark":"light";window.mode.setMode(t),e.setAttribute("aria-label",t)};e.addEventListener("click",o)}}customElements.get("dark-light-toggle")||customElements.define("dark-light-toggle",l);</script> </li> </ul> </nav> <div class="flex items-center justify-center gap-4 text-2xl sm:hidden"> <dark-light-toggle> <button title="Toggle dark & light mode" class="flex items-center"> <span aria-hidden="true" class="clickable iconify tabler--moon dark:tabler--sun"></span> </button> </dark-light-toggle>  <a href="/search/" aria-label="Search"> <span class="clickable iconify tabler--search text-xl"></span> </a> <mobile-nav-toggle> <button class="flex items-center" title="Toggle mobile nav" aria-label="closed"> <span aria-hidden="true" id="mobile-nav-icon" class="clickable iconify tabler--menu-2"></span> </button> </mobile-nav-toggle> <script type="module">class r extends HTMLElement{connectedCallback(){const s="tabler--x",o="tabler--menu-2",e=document.querySelector("#mobile-nav"),n=this.querySelector("#mobile-nav-icon"),t=this.querySelector("button");if(!e||!n||!t)return;const l=()=>!e.classList.contains("hidden"),c=()=>{e.classList.add("hidden"),n.classList.replace(s,o),t.setAttribute("aria-label","closed")},i=()=>{e.classList.remove("hidden"),n.classList.replace(o,s),t.setAttribute("aria-label","open")},a=()=>{l()?c():i()};t.addEventListener("click",a)}}customElements.get("mobile-nav-toggle")||customElements.define("mobile-nav-toggle",r);</script> </div> </div> <hr class="border-separate border-accent/75 undefined"> <div id="mobile-nav" class="hidden"> <nav class="flex-col justify-end py-6"> <ul class="flex flex-col items-center gap-2"> <li class="flex flex-col justify-center"> <a href="/posts/" class="flex items-center gap-1 whitespace-nowrap text-accent/100" target="_self">  <span class="underline"> Blog </span> </a> </li><li class="flex flex-col justify-center"> <a href="/gallery/" class="flex items-center gap-1 whitespace-nowrap clickable" target="_self">  <span class> Photo Gallery </span> </a> </li><li class="flex flex-col justify-center"> <a href="/tags/" class="flex items-center gap-1 whitespace-nowrap clickable" target="_self">  <span class> Tags </span> </a> </li><li class="flex flex-col justify-center"> <a href="/about/" class="flex items-center gap-1 whitespace-nowrap clickable" target="_self">  <span class> About </span> </a> </li><li class="flex flex-col justify-center"> <a href="/contact/" class="flex items-center gap-1 whitespace-nowrap clickable" target="_self">  <span class> Contact </span> </a> </li> </ul> </nav> <hr class="border-separate border-accent/75 undefined"> </div> </header> <div class="mt-4"> <a href="/posts/" class="clickable flex w-fit items-center gap-1"> <span class="iconify tabler--arrow-left text-xl"></span>
Back to all posts
</a> </div> <aside class="scrollbar-hide fixed h-screen w-fit max-w-sm -translate-x-full overflow-y-auto overscroll-y-none pr-8"> <div class="border-accent mt-24 hidden border-r pr-4 opacity-75 transition duration-500 ease-in-out hover:opacity-100 2xl:block"> <div class="overflow-x-hidden p-4"> <div class="prose prose-lg max-w-full dark:prose-invert prose-h1:text-4xl prose-code:before:!content-none prose-code:after:!content-none sm:prose-h1:text-5xl prose-em:pr-[2px] undefined">  <h2 class="no-anchor mb-2">Table of Contents</h2> <details open> <summary>Show more</summary> <ul class="mt-1 mb-1 list-none">
          <li class="mt-1 mb-1">
                              <a href="#i-gots-the-asset-pipeline-blues" class="no-underline hover:underline" aria-label="I Gots the Asset Pipeline Blues">
                                I Gots the Asset Pipeline Blues
                              </a>
                              
                            </li><li class="mt-1 mb-1">
                              <a href="#rails-with-webpack-and-yarn" class="no-underline hover:underline" aria-label="Rails with Webpack and Yarn">
                                Rails with Webpack and Yarn
                              </a>
                              
                            </li><li class="mt-1 mb-1">
                              <a href="#observations" class="no-underline hover:underline" aria-label="Observations">
                                Observations
                              </a>
                              
                            </li><li class="mt-1 mb-1">
                              <a href="#postscript" class="no-underline hover:underline" aria-label="PostScript">
                                PostScript
                              </a>
                              
                            </li><li class="mt-1 mb-1">
                              <a href="#post-postscript" class="no-underline hover:underline" aria-label="Post-PostScript">
                                Post-PostScript
                              </a>
                              
                            </li>
          </ul> </details>  </div>  </div> </div> </aside> <main id="main" class="mt-6 sm:mt-12"> <div class="prose prose-lg max-w-full dark:prose-invert prose-h1:text-4xl prose-code:before:!content-none prose-code:after:!content-none sm:prose-h1:text-5xl prose-em:pr-[2px] mb-6 sm:mb-12">    <h1 class="mt-2 mb-2 sm:my-4">A Rails Antipipeline Alternative?</h1> <div class="flex gap-6 text-base"> <a class="clickable no-underline" href="/tags/ruby-and-rails/"> <span class="iconify align-middle text-xl tabler--tag"></span> <span class="font-normal">ruby-and-rails</span> </a> </div> <div class="mt-4"> <span class="opacity-75">Published on <time datetime="2016-12-20T00:00:00.000Z">Dec 19, 2016</time> by</span> <a class="clickable" href="/authors/Lehman/">Lehman</a> · <span class="whitespace-nowrap opacity-75">3 min read </span> </div> <div class="mt-8 w-fit rounded-sm border 2xl:hidden"> <div class="overflow-x-hidden p-4"> <div class="prose prose-lg max-w-full dark:prose-invert prose-h1:text-4xl prose-code:before:!content-none prose-code:after:!content-none sm:prose-h1:text-5xl prose-em:pr-[2px] undefined">  <h2 class="no-anchor mb-2">Table of Contents</h2> <details> <summary>Show more</summary> <ul class="mt-1 mb-1 list-none">
          <li class="mt-1 mb-1">
                              <a href="#i-gots-the-asset-pipeline-blues" class="no-underline hover:underline" aria-label="I Gots the Asset Pipeline Blues">
                                I Gots the Asset Pipeline Blues
                              </a>
                              
                            </li><li class="mt-1 mb-1">
                              <a href="#rails-with-webpack-and-yarn" class="no-underline hover:underline" aria-label="Rails with Webpack and Yarn">
                                Rails with Webpack and Yarn
                              </a>
                              
                            </li><li class="mt-1 mb-1">
                              <a href="#observations" class="no-underline hover:underline" aria-label="Observations">
                                Observations
                              </a>
                              
                            </li><li class="mt-1 mb-1">
                              <a href="#postscript" class="no-underline hover:underline" aria-label="PostScript">
                                PostScript
                              </a>
                              
                            </li><li class="mt-1 mb-1">
                              <a href="#post-postscript" class="no-underline hover:underline" aria-label="Post-PostScript">
                                Post-PostScript
                              </a>
                              
                            </li>
          </ul> </details>  </div>  </div> </div><article data-pagefind-body> <h2 id="i-gots-the-asset-pipeline-blues">I Gots the Asset Pipeline Blues</h2>
<p>The <a href="https://github.com/bundler/bundler">bundler gem</a> was available around November 2009, and was usable with Rails 2.3:</p>
<p><a href="http://yehudakatz.com/2009/11/03/using-the-new-gem-bundler-today/">http://yehudakatz.com/2009/11/03/using-the-new-gem-bundler-today/</a></p>
<p>The <a href="http://edgeguides.rubyonrails.org/asset_pipeline.html">Asset Pipeline</a> was added to Rails 3.1 in August of 2011:</p>
<p><a href="http://weblog.rubyonrails.org/2011/8/31/rails-3-1-0-has-been-released/">release notes</a></p>
<p>Bundler nailed the Ruby Gem dependency challenge, which was awesome. As the asset pipeline came online, bundler was also used to manage the javascript side of the Rails house. Then <a href="https://github.com/rails/sprockets-rails">Sprockets</a> was added to Rails 4. This is about the time I got lost, and I have not fully recovered. The Javascript part of a production deployment is largely <a href="http://onlineslangdictionary.com/meaning-definition-of/fm">FM</a> (NB - bad language) to me, which is annoying to say the least.</p>
<p>Fast-forward to 2016, and the Javascript ecosystem is - well, I was going to say “more mature”, but “more diverse” might be more accurate. In any event, there are potentially better ways to manage Javascript than what was available for non-JS frameworks 5 years ago. It was time for some investigation.</p>
<h2 id="rails-with-webpack-and-yarn">Rails with Webpack and Yarn</h2>
<p>I read something somewhere by DHH about <a href="https://webpack.github.io/">Webpack</a>, and <a href="http://yehudakatz.com/">Yahuda Katz</a> was working on an <a href="https://www.npmjs.com/">npm</a>-replacement called <a href="https://yarnpkg.com/">Yarn</a>, so those seemed like good places to start. As a result, this entire article is shamelessly stolen abstracted from the article “Replacing the Rails Asset Pipeline with Webpack and Yarn”, by Samuel Mullen, November 16, 2016. This is an in depth look at setting up the Rails/Webpack/Yarn environment. There are a <em>lot</em> of moving parts, nice job Sam!</p>
<p>I followed the demo and I have published my results here:</p>
<p><a href="https://github.com/thecwlzone/rails-antipipeline">rails antipipeline</a></p>
<p>The demo worked flawlessly, except that I needed to create the public/javascripts and public/stylesheets directories in order for the webpack CLI to run properly.</p>
<p>Running</p>
<div style="--code-header-color:#393a34;--code-header-color-dark:#dbd7cacc;--code-header-bg:#ffffff;--code-header-bg-dark:#000"><div class="astro-code-header"><div class="flex gap-2"><span class="lang-icon iconify tabler--dots text-5xl"></span></div><button title="Copy code" aria-label="Copy code" class="flex items-center"><span aria-hidden="true" class="copy-btn"></span></button></div><pre class="astro-code astro-code-themes vitesse-light vitesse-black" style="background-color:#ffffff;--shiki-dark-bg:#000;color:#393a34;--shiki-dark:#dbd7cacc; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shellsession"><code><span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">popped up the "Yay! You're on Rails!" page. Success!</span></span></code></pre></div>
<h2 id="observations">Observations</h2>
<ul>
<li>
<p>There is a nasty looking webpack.config.js file at the Rails root directory. 64 lines of ugly javascript code. This is a serious violation of the Rails “Convention over Configuration” philosophy. Blasphemy! Burn the Witch! 😀</p>
</li>
<li>
<p>There is a node_modules directory in Rails root:</p>
</li>
</ul>
<div style="--code-header-color:#393a34;--code-header-color-dark:#dbd7cacc;--code-header-bg:#ffffff;--code-header-bg-dark:#000"><div class="astro-code-header"><div class="flex gap-2"><span class="lang-icon iconify tabler--dots text-5xl"></span></div><button title="Copy code" aria-label="Copy code" class="flex items-center"><span aria-hidden="true" class="copy-btn"></span></button></div><pre class="astro-code astro-code-themes vitesse-light vitesse-black" style="background-color:#ffffff;--shiki-dark-bg:#000;color:#393a34;--shiki-dark:#dbd7cacc; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="shellsession"><code><span class="line"><span style="color:#005CC5;--shiki-dark:#79B8FF">du -hs node\_modules 74M node\_modules</span></span></code></pre></div>
<p>Ugh. I’m still trying to figure this out, but it seems like node_modules is the Javascript equivalent to Gemfiles. Under that assumption, I added the node_modules directory to .gitignore - I hope that’s the correct procedure. This project is pushing my Javascript ecosystem knowledge into _Terra Incognito*.</p>
<h2 id="postscript">PostScript</h2>
<p>I still have plenty to learn about this new way of handling Javascript in Rails, so I expect I’ll be pushing new commits here and there as I try some more experiments. But for now, I am declaring victory on this project.</p>
<h2 id="post-postscript">Post-PostScript</h2>
<p>Ah ha! Just as I was finishing up my evaluation, what did I see in <a href="http://rubyweekly.com/">Ruby Weekly</a>? (Issue 327):</p>
<p><a href="https://github.com/rails/rails/pull/26836">https://github.com/rails/rails/pull/26836</a></p>
<p>Rails 5.1 support for Webpack and Yarn. Woot! Let’s see how that plays out. Cheers!</p> </article>  <script data-astro-rerun>
  function setupHeadingAnchors() {
    const headings = Array.from(document.querySelectorAll('h2, h3, h4, h5, h6'))
    for (const heading of headings) {
      if (heading.classList.contains('no-anchor')) continue
      heading.classList.add('group')
      const link = document.createElement('a')
      link.innerText = '#'
      link.className =
        'heading-link hidden group-hover:inline-block ml-3 no-underline'
      link.href = '#' + heading.id
      link.ariaHidden = 'true'
      heading.appendChild(link)
    }
  }

  setupHeadingAnchors()
</script>   </div>  </main> <div class="mb-2 flex grow flex-col justify-end"> <div class="my-4 grid grid-cols-5"> <div class="col-span-5 flex flex-col items-start sm:col-span-2"> <a href="/posts/2017/01/09/dap-ed/" class="clickable"> <div class="flex items-center justify-start gap-1"> <span class="iconify tabler--arrow-left text-xl"></span> <span>Next post</span> </div> <span class="mt-2 text-lg underline sm:text-xl"> DAP-ed! </span> </a> </div> <div class="col-span-5 mt-8 flex flex-col items-end sm:col-span-2 sm:col-start-4 sm:mt-0"> <a href="/posts/2016/12/19/chrome-versus-firefox/" class="clickable"> <div class="flex items-center justify-end gap-1"> <span>Previous post</span> <span class="iconify tabler--arrow-right text-xl"></span> </div> <span class="mt-2 text-lg underline sm:text-xl"> Chrome Versus Firefox </span> </a> </div> </div> </div> <footer class="mt-auto"> <hr class="border-separate border-accent/75 undefined"> <div class="flex items-center justify-between gap-2 py-4 text-2xl sm:py-8"> <span class="text-base">&#169; 2025 Christopher W Lehman</span> <div class="grow"></div> <a class="flex flex-col justify-center" href="https://github.com/thecwlzone/thecwlzone-4.0" target="_blank" aria-label="Github" rel="noopener noreferrer"> <span title="Github" class="iconify clickable tabler--brand-github"></span> </a><a class="flex flex-col justify-center" href="/feed.xml" target="_self" aria-label="RSS feed" rel="noopener noreferrer"> <span title="RSS feed" class="iconify clickable tabler--rss"></span> </a> </div> </footer> </div> <scroll-progress-bar class="fixed top-0 w-full"> <div class="bg-accent h-1 w-0"></div> </scroll-progress-bar> <script type="module">class o extends HTMLElement{connectedCallback(){const t=this.children[0];function c(){const e=document.body.scrollTop||document.documentElement.scrollTop,l=document.documentElement.scrollHeight-document.documentElement.clientHeight;return e/l*100}document.addEventListener("scroll",()=>{const e=c();t.style.width=`${e}%`})}}customElements.get("scroll-progress-bar")||customElements.define("scroll-progress-bar",o);</script><scroll-top-button class="fixed! right-4 bottom-4 z-10 hidden pr-2 sm:right-8 sm:bottom-8 lg:right-16 lg:bottom-16"> <button class="clickable flex items-center gap-2" title="Scroll to top" aria-label="Scroll to top"> <span aria-hidden="true" class="iconify tabler--arrow-up text-4xl"></span> </button> </scroll-top-button> <script type="module">class n extends HTMLElement{connectedCallback(){const t=this.querySelector("button");if(!t)return;function e(){const o=document.documentElement.clientHeight;return(document.body.scrollTop||document.documentElement.scrollTop)>o}t.addEventListener("click",()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0}),document.addEventListener("scroll",()=>{e()?this.classList.remove("hidden"):this.classList.add("hidden")})}}customElements.get("scroll-top-button")||customElements.define("scroll-top-button",n);</script> <script data-astro-rerun>
  function setupCopyCodeButtons() {
    document.querySelectorAll('.astro-code-header > button').forEach((btn) => {
      btn.addEventListener('click', async () => {
        const code =
          btn.parentNode?.parentNode?.querySelector('.astro-code code')

        const icon = btn.querySelector('span')

        await navigator.clipboard.writeText(code.innerText)

        icon.className = 'copy-success'

        setTimeout(() => {
          icon.className = 'copy-btn'
        }, 1000)
      })
    })
  }

  setupCopyCodeButtons()
</script> <script type="module" src="/_astro/MediumZoomPlugin.astro_astro_type_script_index_0_lang.Rz_fyBje.js"></script>  </body></html>